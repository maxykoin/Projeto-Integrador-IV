{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Novo Pedido</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" href="https://images.icon-icons.com/3911/PNG/512/bosch_logo_icon_247437.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="icon" href="https://cdn.iconscout.com/icon/free/png-256/free-bosch-3442885-2875346.png">
    <style>
        body { font-family: 'Poppins', sans-serif; }
        .hexagon-shape {
            clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%);
        }
        /* Custom colors for pieces */
        .bg-blue-500 { background-color: #3b82f6; }
        .bg-purple-600 { background-color: #9333ea; }
        .bg-green-600 { background-color: #10b981; }
    </style>
</head>

<body class="bg-gray-50 min-h-screen flex flex-col">

    <header class="flex items-center gap-6 px-6 py-4 shadow-lg" style="background: url(https://www.boschmediaservice.hu/storage/publication/118_w1600.jpg); background-size: cover; background-position: center;">
        <a href="/" aria-label="Home" class="text-white text-3xl hover:opacity-75 transition-opacity">
            <i class="fas fa-home"></i>
        </a>
        <a href="/pedidos/" aria-label="Criar Novo Pedido" class="text-white text-3xl hover:opacity-75 transition-opacity">
            <i class="fas fa-plus-circle"></i>
        </a>
        <a href="/pedidos/historico" aria-label="Histórico de Pedidos" class="text-white text-3xl hover:opacity-75 transition-opacity">
            <i class="fas fa-list"></i>
        </a>
    </header>

    <main class="flex-grow max-w-5xl mx-auto p-8 w-full"> {# Increased max-width to accommodate multiple sections #}
        <h1 class="text-4xl font-extrabold text-center mb-10 text-gray-800 tracking-tight">Novo Pedido</h1>

        <div class="bg-white p-8 rounded-xl shadow-lg border border-gray-200 flex flex-col gap-10"> {# Increased gap between order sections #}
            <form id="pedidoForm" class="flex flex-col items-center gap-8 w-full">

                {% for i in "123" %} {# Loop para criar 3 blocos de pedido #}
                <div class="pedido-secao w-full border-b pb-8 mb-8 last:border-b-0 last:pb-0 last:mb-0"> {# Separador para cada pedido #}
                    <h2 class="text-2xl font-bold mb-6 text-purple-700 text-center">Pedido {{ i }}</h2>
                    
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-6 w-full">
                        {% for j in "123" %} {# Peça 1, 2, 3 dentro de cada pedido #}
                        <div>
                            <label class="block mb-2 font-semibold text-center text-gray-700">Peça {{ j }}</label>
                            <select name="peca{{ forloop.parentloop.counter0|add:forloop.parentloop.counter0|add:forloop.parentloop.counter0|add:forloop.counter }}" required class="w-full p-3 border rounded-lg text-center shadow-sm hover:shadow-md transition">
                                <option value="" disabled selected>Escolha...</option>
                                <option value="circle">Círculo</option>
                                <option value="hexagon">Hexágono</option>
                                <option value="square">Quadrado</option>
                            </select>
                        </div>
                        {% endfor %}
                    </div>

                    <div class="flex justify-center gap-4 mt-6"> {# Adjusted layout for preview #}
                        {# IDs agora são peca_pedido1_peca1, peca_pedido1_peca2, etc. #}
                        <div id="peca_pedido{{ i }}_peca1" class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center shadow-inner transition-all duration-300"></div>
                        <div id="peca_pedido{{ i }}_peca2" class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center shadow-inner transition-all duration-300"></div>
                        <div id="peca_pedido{{ i }}_peca3" class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center shadow-inner transition-all duration-300"></div>
                    </div>
                </div>
                {% endfor %}

                <button id="confirmarBtn" type="button"
                    class="mt-4 bg-purple-600 hover:bg-purple-700 text-white text-lg px-8 py-3 rounded-full shadow-md hover:shadow-lg transition">
                    <i class="fas fa-check-circle mr-2"></i> Confirmar Pedido Principal
                </button>
            </form>
        </div>
    </main>

    <footer class="bg-gray-800 text-white text-center p-4 shadow-inner">
        <p>&copy; 2025 Projeto Integrador IV. Todos os direitos reservados.</p>
    </footer>

    <script src="{% static 'script.js' %}"></script>
</body>
</html>
